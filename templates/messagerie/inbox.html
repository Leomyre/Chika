{% extends 'messagerie/base.html' %}

{% block title %}Boîte de Réception{% endblock %}

{% block header %}
<h2 class="text-xl font-semibold">Vos Messages</h2>
{% endblock %}

{% block content %}
<div class="bg-white rounded-lg shadow transition-colors duration-200">
    <h3 class="text-lg font-semibold p-4 border-b">Conversations</h3>
    <ul class="divide-y divide-gray-200">
        {% for user in users %}
            <li>
                <a href="{% url 'conversation' user.id %}" class="block hover:bg-gray-50 transition duration-150 ease-in-out">
                    <div class="flex items-center px-4 py-4 sm:px-6">
                        <div class="min-w-0 flex-1 flex items-center">
                            <div class="flex-shrink-0">
                                <img class="h-12 w-12 rounded-full" src="https://ui-avatars.com/api/?name={{ user.username }}&background=random" alt="{{ user.username }}">
                            </div>
                            <div class="min-w-0 flex-1 px-4">
                                <div>
                                    <p class="text-sm font-medium text-indigo-600 truncate">{{ user.username }}</p>
                                    <p class="mt-2 flex items-center text-sm text-gray-500">
                                        <span class="truncate">{{ user.last_message|truncatechars:50 }}</span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </a>
            </li>
        {% empty %}
            <li class="px-4 py-4 sm:px-6 text-gray-500">Aucun utilisateur disponible.</li>
        {% endfor %}
    </ul>
</div>
{% endblock %}